!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(t="undefined"!=typeof globalThis?globalThis:t||self).CorgiScroll=i()}(this,(function(){"use strict";function t(t,i){let n=0,o=!1;function e(n){o=!0;if(n.target.getAttribute("data-index")){const o=parseInt(n.target.getAttribute("data-index"));r(o),t.root.scrollTo({top:0,left:(e=o,i.slides[e].snapPoint),behavior:"smooth"})}var e;setTimeout((()=>{o=!1}),750)}function s(){if(o)return;const n=(e=i.slides.map((t=>t.snapPoint)),s=t.root.scrollLeft,e.reduce(((i,n)=>s>=t.root.scrollWidth-t.rootBounds.width||n<=s?n:i)));var e,s;r(Array.from(i.slides).findIndex((t=>t.snapPoint===n)))}function r(i){console.log("hi"),console.log(t.pagination),t.pagination.children[n].classList.remove("active"),t.pagination.children[i].classList.add("active"),n=i}!function(){const n=`\n            ${i.slides.map(((t,i)=>`<button class="corgiscroll__pagination-dot" data-index="${i}"><span class="">${i}</span></button>`)).join("")}\n        `;t.pagination.innerHTML=n}(),t.pagination.addEventListener("click",e),t.root.addEventListener("scroll",s)}function i(t,i){let n=[],o=0,e=0;const s=t.snapType,r=i.getBoundingClientRect(),a=t=>{const i=getComputedStyle(t);return parseInt(i.getPropertyValue("margin-left"))+parseInt(i.getPropertyValue("margin-left"))+t.getBoundingClientRect().width},l=(t,i)=>{const n=t.getBoundingClientRect();return 0===i?0:"center"===s?n.x-r.x-r.width/2:"start"===s?n.x-r.x:null};return Array.from(i.children).forEach(((t,i)=>{o+=a(t),(o>("center"===s?0===e?r.width/2:r.width:"start"===s?r.width:0)||0===i)&&(e++,o=a(t),n.push({el:t,snapPoint:l(t,i)}))})),n}return class{root;rootBounds={};options={};pagination;windowWidth;events={};constructor(t,n){this.root=t,this.rootBounds=this.root.getBoundingClientRect(),this.windowWidth=window.innerWidth,new Event("corgiscroll:resize");const o={root:this.root,rootBounds:this.rootBounds,pagination:this.generateInitialPagination(),style:"dot",type:"page",snapType:getComputedStyle(this.root.children[0]).getPropertyValue("scroll-snap-align")};this.options=Object.assign(o,n),this.pagination={el:null,slides:i(this.options,this.root)},this.init()}init(){this.initialiseSlideClasses(),window.addEventListener("resize",this.handleResize),t(this.options,this.pagination)}handleResize=function(t,i){let n=null;return(...o)=>{window.clearTimeout(n),n=window.setTimeout((()=>{t.apply(null,o)}),i)}}((()=>{(this.windowWidth<window.innerWidth||this.windowWidth>window.innerWidth)&&(this.refresh(),this.windowWidth=window.innerWidth)}),200);generateInitialPagination(){const t=document.createElement("div");return t.classList.add("corgiscroll-pagination"),this.root.after(t),t}initialiseSlideClasses(){Array.from(this.root.children).forEach(((t,i)=>{let n=t.getBoundingClientRect();t.setAttribute("data-slide",i.toString()),t.setAttribute("data-position",n.x.toString())}))}refresh(){document.querySelector(".corgiscroll-pagination")?.remove(),this.options.rootBounds=this.root.getBoundingClientRect(),this.options.pagination=this.generateInitialPagination(),this.pagination.slides=i(this.options,this.root),t(this.options,this.pagination)}}}));
