!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(t="undefined"!=typeof globalThis?globalThis:t||self).CorgiScroll=i()}(this,(function(){"use strict";function t(t){let i=t.events;return{on:(t,n)=>{"object"!=typeof i[t]&&(i[t]=[]),i[t].push(n)},emit:(t,...n)=>{"object"==typeof i[t]&&i[t].forEach((t=>{t.apply(null,n)}))}}}function i(i,n,e){const o=t(i),{on:s,emit:r}=o;let l=0;function a(){const t=document.createElement("div");t.classList.add("corgiscroll-pagination");const n=`\n            ${e.slides.map(((t,i)=>0===i?`<button class="corgiscroll__pagination-dot active" data-index="${i}"><span class="">${i}</span></button>`:`<button class="corgiscroll__pagination-dot" data-index="${i}"><span class="">${i}</span></button>`)).join("")}\n        `;t.innerHTML=n,i.pagination.el=t,i.root.after(t)}function d(t){t.target.getAttribute("data-index")&&i.go(parseInt(t.target.getAttribute("data-index")))}a(),e.el.addEventListener("click",d),s("scroll",(()=>{const t=(i=e.slides.map((t=>t.snapPoint)),o=n.root.scrollLeft,i.reduce(((t,i)=>o>=n.root.scrollWidth-n.rootBounds.width||i<=o?i:t)));var i,o;const s=Array.from(e.slides).findIndex((i=>i.snapPoint===t));r("update_active",s)})),s("update_active",(t=>{i.pagination.el.children[l].classList.remove("active"),i.pagination.el.children[t].classList.add("active"),l=t})),s("refresh",(()=>{console.log("hi"),console.log(i.pagination.el),i.pagination.el.remove(),a()}))}function n(i,n){return t(i),{init:()=>{!function(){let t=document.createElement("div");t.classList.add("corgiscroll__arrows");const e=`\n            <button class="corgiscroll__arrow corgiscroll__arrow--left">w\n                ${n.arrowLeftHtml}\n            </button>\n            <button class="corgiscroll__arrow corgiscroll__arrow--right">\n                ${n.arrowRightHtml}\n            </button>\n        `;t.innerHTML=e,i.root.after(t)}()}}}function e(t,i){let n=[],e=0,o=0;const s=t.snapType,r=i.getBoundingClientRect(),l=t=>{const i=getComputedStyle(t);return parseInt(i.getPropertyValue("margin-left"))+parseInt(i.getPropertyValue("margin-left"))+t.getBoundingClientRect().width},a=(t,i)=>{const n=t.getBoundingClientRect();return 0===i?0:"center"===s?n.x-r.x-r.width/2:"start"===s?n.x-r.x:null};return Array.from(i.children).forEach(((t,i)=>{e+=l(t),(e>("center"===s?0===o?r.width/2:r.width:"start"===s?r.width:0)||0===i)&&(o++,e=l(t),n.push({el:t,snapPoint:a(t,i)}))})),n}return class{root;rootBounds={};options={};pagination;windowWidth;events={};active;on;emit;constructor(i,o){this.root=i,this.rootBounds=this.root.getBoundingClientRect(),this.windowWidth=window.innerWidth,this.active=0;const s={root:this.root,rootBounds:this.rootBounds,style:"dot",type:"page",snapType:getComputedStyle(this.root.children[0]).getPropertyValue("scroll-snap-align"),arrowLeftHtml:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14"><g><line x1="13.5" y1="7" x2="0.5" y2="7" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round"></line><polyline points="4 3.5 0.5 7 4 10.5" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round"></polyline></g></svg>',arrowRightHtml:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14 14"><g><line x1="0.5" y1="7" x2="13.5" y2="7" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round"></line><polyline points="10 10.5 13.5 7 10 3.5" fill="none" stroke="#000000" stroke-linecap="round" stroke-linejoin="round"></polyline></g></svg>'};this.options=Object.assign(s,o),this.pagination={el:null,slides:e(this.options,this.root)};const r=t(this);this.on=r.on,this.emit=r.emit,n(this,this.options).init(),this.init()}init(){this.initialiseSlideClasses(),window.addEventListener("resize",this.emit("resized")),window.addEventListener("resize",this.handleResize),this.root.addEventListener("scroll",(()=>{this.emit("scroll")})),i(this,this.options,this.pagination)}go(t){this.root.scrollTo({top:0,left:(t=>this.pagination.slides[t].snapPoint)(t),behavior:"smooth"})}next(){this.go((()=>{if(!(this.active+1>this.pagination.slides.length-1))return this.active+1}))}prev(){this.go((()=>{if(!(this.active-1<this.pagination.slides.length-1))return this.active+1}))}handleResize=function(t,i){let n=null;return(...e)=>{window.clearTimeout(n),n=window.setTimeout((()=>{t.apply(null,e)}),i)}}((()=>{if(this.windowWidth<window.innerWidth||this.windowWidth>window.innerWidth){this.emit("resize"),this.windowWidth=window.innerWidth;const t=e(this.options,this.root);(t.length>this.pagination.slides.length||t.length<this.pagination.slides.length)&&(this.pagination.slides=t,this.emit("refresh"))}}),200);initialiseSlideClasses(){Array.from(this.root.children).forEach(((t,i)=>{let n=t.getBoundingClientRect();t.setAttribute("data-slide",i.toString()),t.setAttribute("data-position",n.x.toString())}))}}}));
