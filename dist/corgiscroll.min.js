!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t="undefined"!=typeof globalThis?globalThis:t||self).CorgiScroll=n()}(this,(function(){"use strict";function t(t,n){let i=0;function o(i){if(console.log(i),i.target.getAttribute("data-index")){const e=parseInt(i.target.getAttribute("data-index"));console.log(n.slides[e].snapPoint),t.root.scrollTo({top:0,left:(o=e,n.slides[o].snapPoint),behavior:"smooth"})}var o}function e(){const o=(e=n.slides.map((t=>t.snapPoint)),s=t.root.scrollLeft,e.reduce(((n,i)=>s>=t.root.scrollWidth-t.rootBounds.width||i<=s?i:n)));var e,s;!function(t){n.el.children[i].classList.remove("active"),n.el.children[t].classList.add("active"),i=t}(Array.from(n.slides).findIndex((t=>t.snapPoint===o)))}!function(){const i=`\n            ${n.slides.map(((t,n)=>`<button class="corgiscroll__pagination-dot" data-index="${n}"><span class="">${n}</span></button>`)).join("")}\n        `;t.pagination.innerHTML=i}(),t.pagination.addEventListener("click",o),t.pagination.addEventListener("scroll",e)}function n(t,n){let i=[],o=0,e=0;const s=t.snapType,r=n.getBoundingClientRect(),a=t=>{const n=getComputedStyle(t);return parseInt(n.getPropertyValue("margin-left"))+parseInt(n.getPropertyValue("margin-left"))+t.getBoundingClientRect().width},l=(t,n)=>{const i=t.getBoundingClientRect();return 0===n?0:"center"===s?i.x-r.x-r.width/2:"start"===s?i.x-r.x:null};return Array.from(n.children).forEach(((t,n)=>{o+=a(t),(o>("center"===s?0===e?r.width/2:r.width:"start"===s?r.width:0)||0===n)&&(e++,o=a(t),i.push({el:t,snapPoint:l(t,n)}))})),i}return class{root;rootBounds={};options={};pagination;constructor(t,i){this.root=t,this.rootBounds=this.root.getBoundingClientRect();const o={root:this.root,rootBounds:this.rootBounds,pagination:this.generateInitialPagination(),style:"dot",type:"page",snapType:getComputedStyle(this.root.children[0]).getPropertyValue("scroll-snap-align")};this.options=Object.assign(o,i),this.pagination={el:null,slides:n(this.options,this.root)},this.init()}init(){this.initialiseSlideClasses(),t(this.options,this.pagination)}generateInitialPagination(){const t=document.createElement("div");return t.classList.add("corgiscroll-pagination"),this.root.after(t),t}initialiseSlideClasses(){Array.from(this.root.children).forEach(((t,n)=>{let i=t.getBoundingClientRect();t.setAttribute("data-slide",n.toString()),t.setAttribute("data-position",i.x.toString())}))}}}));
